{"name":"Paymill Connect","tagline":"@thiagolocatelli","body":"android-paymill-connect\r\n======================\r\n\r\nAndroid Library for integrating with Paymill Connect using [Paymill Connect Oauth](https://paymill.com/en-gb/unite-documentation).\r\n\r\n<center>\r\n![Paymill Connect](https://github.com/thiagolocatelli/android-stripe-connect/raw/master/resources/screenshots/screenshot1.png \"Paymill Connect\")\r\n![Paymill Connect](https://github.com/thiagolocatelli/android-paymill-connect/raw/master/resources/screenshots/screenshot2.png \"Paymill Connect\")\r\n![Paymill Connect](https://github.com/thiagolocatelli/android-paymill-connect/raw/master/resources/screenshots/screenshot3.png \"Paymill Connect\")\r\n</center>\r\n\r\n\r\n## Usage\r\n\r\nYou can add the Paymill Connect button to your layout using the following XML code:\r\n\r\n\r\n```XML\r\n\t<com.github.thiagolocatelli.paymill.PaymillButton\r\n\t\tandroid:id=\"@+id/btnPaymillConnect\"\r\n\t\tandroid:layout_height=\"wrap_content\"\r\n\t\tandroid:layout_width=\"200dip\" \r\n\t\tandroid:layout_gravity=\"center_horizontal\"\r\n\t\tandroid:layout_marginTop=\"20dip\"/>\r\n```\r\n\r\nYou can create an utility class where you can define your application credentials, like the one below (This is obvilously insecure, make sure you keep all this information stored in a way its impossible to decompile):\r\n\r\n```Java\r\npublic class ApplicationData {\r\n\tpublic static final String CLIENT_ID = \"\";\r\n\tpublic static final String CLIENT_SECRET = \"\";\r\n\tpublic static final String CALLBACK_URL = \"\";\r\n}\r\n```\r\n\r\nInside your Activity, you can manipulate the button and change its properties. You can either launch a Dialog to start the authentication or start a Activity.\r\n\r\n```Java\r\nPaymillApp = new PaymillApp(this, ApplicationData.CLIENT_ID, \r\n\t\t\t\tApplicationData.SECRET_KEY, ApplicationData.CALLBACK_URL);\r\n\r\nmPaymillButton = (PaymillButton) findViewById(R.id.btnPaymillConnect);\r\n\t\tmPaymillButton.setPaymillApp(mApp);\r\n\t\tmPaymillButton.addPaymillConnectListener(new PaymillConnectListener() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onConnected() {\r\n\t\t\t\ttvSummary.setText(\"Connected as \" + mApp.getAccessToken());\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onDisconnected() {\r\n\t\t\t\ttvSummary.setText(\"Disconnected\");\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onError(String error) {\r\n\t\t\t\tToast.makeText(MainActivity.this, error, Toast.LENGTH_SHORT).show();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n```\r\n\r\nBy default, when the Paymill Connect button is clicked, an Android Dialog will open and display the Paymill authentication page. If you would like to open an Activity instead of a Dialog, you can use **setConnectMode** to change such behavior.\r\n\r\n```Java\r\nmPaymillButton = (PaymillButton) findViewById(R.id.btnPaymillConnect);\r\nmPaymillButton.setPaymillApp(mApp);\r\nmPaymillButton.setConnectMode(CONNECT_MODE.ACTIVITY);\r\n```\r\nYou also need to add to your AndroidManifest.xml the following line, which will allow the Paymill Connect button to start the authentication Activity.\r\n\r\n```XML\r\n<activity android:name=\"com.github.thiagolocatelli.paymill.PaymillActivity\"  />\r\n```\r\n\r\nOnce the authentication is finished, you can use the helper methods from the object PaymillApp to get the data you need, like the oauth access token required to make calls using the [Paymill Mobile-SDK for Android](https://github.com/paymill/paymill-android).\r\n\r\n```JAVA\r\npublic void test() {\r\n  String mPublicKey = mPaymillApp.getPublicKey();\r\n  // the payment method ( cc or dd data)\r\n  PMPaymentMethod method = PMFactory.genCardPayment(\"Max Mustermann\", \"4111111111111111\", \"12\", \"2015\", \"1234\");\r\n  // the payment parameters (currency, amount, description)\r\n  PMPaymentParams params = PMFactory.genPaymentParams(\"EUR\", 100, null);\r\n  PMManager.generateToken(getApplicationContext(), method, params, PMService.ServiceMode.TEST, mPublicKey);\r\n}\r\n```\r\n\r\nDownload the sample application and git it a try.\r\n\r\n## Contact\r\n\r\nIf you have any questions, please drop me a line: \"thiago:locatelli$gmail:com\".replace(':','.').replace('$','@')\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}